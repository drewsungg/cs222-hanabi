<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hanabi â€” LLM Agent Viewer</title>
  <link rel="stylesheet" href="/static/style.css">
  <style>
    /* Inline fallback so the page is never blank */
    body { background: #1a1a2e; color: #e0e0e0; font-family: sans-serif; margin: 0; }
    .hidden { display: none !important; }
    #config-panel {
      max-width: 420px; margin: 80px auto; padding: 32px;
      background: #16213e; border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0,0,0,.4);
    }
    #config-panel h1 { text-align: center; margin-bottom: 24px; }
    .form-row { margin-bottom: 16px; }
    .form-row label { display: block; margin-bottom: 4px; font-size: .85rem; color: #888; }
    .form-row select, .form-row input {
      width: 100%; padding: 8px 12px; border: 1px solid #333;
      border-radius: 6px; background: #1a1a2e; color: #e0e0e0; font-size: .95rem;
      box-sizing: border-box;
    }
    #config-panel button {
      width: 100%; padding: 10px; border: none; border-radius: 6px;
      background: #e94560; color: #fff; font-size: 1rem; font-weight: 600; cursor: pointer;
    }
    .error { color: #e94560; margin-top: 12px; text-align: center; }
    .sub { color: #888; font-weight: 400; font-size: 1rem; }
  </style>
</head>
<body>
  <!-- Config panel -->
  <div id="config-panel" class="panel">
    <h1>Hanabi <span class="sub">LLM Agent Viewer</span></h1>
    <p style="text-align:center;color:#888;margin-bottom:20px;font-size:.85rem;">
      API key loaded from <code>.env</code> file
    </p>
    <div class="form-row">
      <label for="num-players">Players</label>
      <select id="num-players">
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5" selected>5</option>
      </select>
    </div>
    <button id="start-btn">Start Game</button>
    <p id="config-error" class="error"></p>
  </div>

  <!-- Game board (hidden until game starts) -->
  <div id="game-board" class="hidden">
    <!-- Top bar -->
    <div id="top-bar">
      <div class="token-group">
        <span class="label">Score</span>
        <span id="score" class="big">0</span><span class="dim">/25</span>
      </div>
      <div class="token-group">
        <span class="label">Lives</span>
        <span id="lives" class="big">3</span>
      </div>
      <div class="token-group">
        <span class="label">Hints</span>
        <span id="hints" class="big">8</span>
      </div>
      <div class="token-group">
        <span class="label">Deck</span>
        <span id="deck-count" class="big">0</span>
      </div>
      <div class="token-group">
        <span class="label">Turn</span>
        <span id="turn-num" class="big">0</span>
      </div>
      <div id="speed-control">
        <label for="speed">Speed</label>
        <input id="speed" type="range" min="0" max="2000" value="500" step="100">
      </div>
    </div>

    <!-- Fireworks -->
    <div id="fireworks">
      <h2>Fireworks</h2>
      <div id="firework-stacks"></div>
    </div>

    <!-- Player hands -->
    <div id="hands-area"></div>

    <!-- Discard pile -->
    <div id="discard-section">
      <h3>Discard Pile <span id="discard-count">(0)</span></h3>
      <div id="discard-pile"></div>
    </div>

    <!-- Turn log -->
    <div id="log-section">
      <h3>Turn Log</h3>
      <div id="log"></div>
    </div>
  </div>

  <!-- Game over overlay -->
  <div id="gameover-overlay" class="hidden">
    <div class="gameover-box">
      <h2>Game Over</h2>
      <p>Final score: <span id="final-score">0</span>/25</p>
      <p id="final-fireworks"></p>
      <p id="final-turns"></p>
      <button id="restart-btn">Play Again</button>
    </div>
  </div>

  <script src="/static/app.js" defer></script>
</body>
</html>
